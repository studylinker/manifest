apiVersion: apps/v1
kind: Deployment
metadata:
  name: studylinker-front
  namespace: webservice
  labels:
    app: studylinker-web
spec:
  replicas: 2
  selector:
    matchLabels:
      app: studylinker-web
  template:
    metadata:
      labels:
        app: studylinker-web
    spec:
      containers:
        - name: frontend
          image: nugulsuhan/p_frontend:6f93b0a3d6aeeab90f6913cb22db1a245e6c601d
          ports:
            - containerPort: 80
   
      volumeMounts:
            # ğŸŒŸ 1. ConfigMapì„ Nginx ì„¤ì • íŒŒì¼ ìœ„ì¹˜ì— ë§ˆìš´íŠ¸
            - name: nginx-config-volume
              mountPath: /etc/nginx/conf.d/
              readOnly: true
    volumes:
        # ğŸŒŸ 2. ì‚¬ìš©í•  ConfigMap ë³¼ë¥¨ ì •ì˜
        - name: nginx-config-volume
          configMap:
            name: studylinker-front-nginx-config # 1ë‹¨ê³„ì—ì„œ ìƒì„±í•œ ConfigMap ì´ë¦„
            items:
              - key: default.conf # ConfigMapì˜ data ì„¹ì…˜ì˜ í‚¤
                path: default.conf # ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ íŒŒì¼ ì´ë¦„
